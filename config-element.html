<link rel="import" href="bower_components/polymer/polymer.html">
<polymer-element name="config-element">
  <template>
    <div horizontal around-justified layout>
      <div>
        <p>
          <label for="firstDayOfSprintInput">Sprint Begins On:</label>
          <select id="firstDayOfSprintInput" value="{{first_day_of_sprint}}">
            <option value="M">Monday</option>
            <option value="T">Tuesday</option>
            <option value="W">Wednesday</option>
            <option value="TH">Thursday</option>
            <option value="F">Friday</option>
          </select>
        </p>
      </div>
      <div>
        <p>
          <label for="maxPointsInput">Max Points Per Day:</label>
          <input id="maxPointsInput" value="{{max_points_per_day}}">
        </p>
      </div>
    </div>
    <template repeat="{{sprinters}}">
      <div horizontal layout>
        <paper-input-decorator label="Name" floatingLabel>
          <input value="{{name}}">
        </paper-input-decorator>
        <div>&nbsp;</div>
        <paper-input-decorator label="Days Available" floatingLabel>
          <input value="{{days_available}}">
        </paper-input-decorator>
        <div>
          <p><b>{{name}}</b> has <span style="days_available: {{days_available}}">{{days_available}}</span> available days.</p>
        </div>
    </div>
     </template>
     <p>
      <paper-button class="colored custom" on-click="{{onClick}}">
        <core-icon icon="check"></core-icon>
        update
      </paper-button>
      <paper-button class="custom">
        <core-icon icon="clear"></core-icon>
        reset
      </paper-button>
    </p>
  </template>
  <script>
    Polymer({
      created: function() {
        //set up initial values
        this.max_points_per_day = 5,
        this.SPRINT_DAYS = [ "W", "TH", "F", "M", "T", "W", "TH", "F", "M", "T" ],
        this.first_day_of_sprint = "W",
        this.days_of_sprint = [
          { day: 'Monday', value: 'M' },
          { day: 'Tuesday', value: 'T' },
          { day: 'Wednesday', value: 'W' },
          { day: 'Thursday', value: 'TH' },
          { day: 'Friday', value: 'F' }
        ],
        this.sprinters = [
          { name: 'Evan', days_available: 2},
          { name: "Caleb", days_available: 2 },
          { name: "Naveen", days_available: 10 },
          { name: "Jihyun", days_available: 10 },
          { name: "Alex", days_available: 10 },
          { name: "Kosta", days_available: 10 },
          { name: "Ryan", days_available: 10 }
        ];
      },
      observe: {
        first_day_of_sprint:'changeSprintDays',
        max_points_per_day:'changeMaxPoints'
      },
      changeSprintDays: function(oldValue,newValue) {
        console.log(oldValue);
        console.log(newValue);
        var index=this.SPRINT_DAYS.indexOf(newValue);
        console.log(index);
        for (var x=0; x<index; x++) {
          this.SPRINT_DAYS.push(this.SPRINT_DAYS.shift());
        }
        console.log(this.SPRINT_DAYS);
      },
      changeMaxPoints: function(oldValue,newValue) {
        // what do we need to do here?
      },
      nameChanged: function() {
        if (this.name) {
          this.name = this.name[0].toUpperCase() +
                      this.name.slice(1);
        }
      },
      daysChanged: function() {
        if (this.days_available > 10) {
          $('input#daysInput').addClass('error');
        }
      },
      publish: {
        max_points:this.max_points_per_day,
        days_of_sprint:this.SPRINT_DAYS
      },
      onClick: function() {
        this.fire(cgsb.init());
      }
    });
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="scrumbowling.js"></script>
</polymer-element>